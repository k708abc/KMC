可能な限りc++の機能を使って書いた。
listをvectorに置き換え、ほぼすべてのフォルダにpxdファイルを作ることでcimportした。
シミュレーション自体はうまく行っているようだが、速度は非常に遅くなった（比較用パラメータセットで50 ms/loop）。
原因は今のところ分からず。
→どうもVectorは要素数の変わる置き換えが遅いっぽい。
例えばvector[vector[int]]みたいなリストで、内部のvector[int]そのものを置き換えるような動作が非常に遅い。
要素数を固定したコードを書けば早くなるかも。